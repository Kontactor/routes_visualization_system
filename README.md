# Transport Catalogue System

Полнофункциональная система управления транспортным каталогом с поддержкой маршрутизации, визуализации и JSON интерфейса.

## Особенности

- **Полный транспортный каталог** - управление остановками и маршрутами общественного транспорта
- **Расчет маршрутов** - поиск оптимальных путей с учетом времени ожидания и скорости транспорта
- **Визуализация карт** - генерация SVG-изображений транспортных сетей
- **Географические вычисления** - точный расчет расстояний на сфере Земли
- **JSON API** - полная поддержка JSON для ввода/вывода данных
- **Графовые алгоритмы** - эффективные алгоритмы поиска кратчайших путей

## Технологии и инструменты

- **Язык программирования**: C++17/20 (использование ranges, optional, variant)
- **Структуры данных**: 
  - Хэш-таблицы для быстрого поиска остановок и маршрутов
  - Графы для моделирования транспортной сети
  - Деревья и множества для сортировки и уникализации
- **Алгоритмы**:
  - Алгоритм Дейкстры для поиска кратчайших путей
  - Сферическая геометрия (формула гаверсинусов)
  - Проекция сферических координат на 2D плоскость
- **Визуализация**: SVG-рендеринг с поддержкой различных графических примитивов
- **Сериализация**: Полноценный JSON парсер и генератор
- **Архитектура**: Модульный дизайн с четким разделением ответственности

## Архитектура проекта

### Основные модули:

1. **`transport_catalogue`** - ядро системы, хранит данные об остановках и маршрутах
   - `TransportCatalogue` - основной класс каталога
   - Хранение остановок, маршрутов и расстояний между остановками

2. **`domain`** - бизнес-логика и структуры данных
   - `Stop`, `Route`, `RouteStats` - основные бизнес-объекты
   - `HasherPairPtr` - хэшер для пар указателей на остановки
   - `RouterSettings`, `RouteInfo` - настройки и информация о маршрутах

3. **`geo`** - географические вычисления
   - `Coordinates` - географические координаты
   - `ComputeDistance` - расчет расстояний на сфере

4. **`graph`** - графовые структуры и алгоритмы
   - `DirectedWeightedGraph` - взвешенный ориентированный граф
   - `Router` - алгоритмы поиска путей в графе

5. **`router`** - транспортная маршрутизация
   - `TransportRouter` - построение маршрутов общественного транспорта
   - Конвертация транспортной сети в граф

6. **`map_renderer`** - визуализация карт
   - `MapRenderer` - рендеринг SVG-карт
   - `SphereProjector` - проекция сферических координат на плоскость
   - `RenderSettings` - настройки визуализации

7. **`svg`** - SVG-генерация
   - `Document`, `Circle`, `Polyline`, `Text` - SVG-примитивы
   - `Color`, `Point` - базовые структуры для графики

8. **`json`** - JSON обработка
   - `Document`, `Node` - представление JSON-документов
   - `Builder` - флюентный интерфейс для построения JSON

9. **`json_reader`** - чтение и обработка JSON запросов
   - `JsonReader` - парсинг входных JSON данных
   - Генерация ответов в формате JSON

10. **`request_handler`** - обработка запросов
    - `RequestHandler` - координация работы всех компонентов системы
    - Связь между каталогом, рендерером и роутером

11. **`ranges`** - утилиты для работы с диапазонами
    - `Range`, `AsRange` - обертки для итераторов

### Ключевые структуры данных:

```cpp
struct Stop {
    std::string name;
    geo::Coordinates coordinates;
};

struct Route {
    std::string name;
    std::vector<Stop*> stops;
    bool is_roundtrip;
};

struct RouteStats {
    double geo_distance;      // Географическое расстояние
    size_t route_length;      // Фактическая длина маршрута
    size_t stops_count;       // Общее количество остановок
    size_t uniquestops_count; // Количество уникальных остановок
};